<tr class='<%= prediction.state == 'completed' ? 'success' : 'warning' %>'>
  <td><%= prediction.created_at.strftime('%Y/%m/%d %H:%M:%S') %></td>
  <td><%= prediction.model %></td>
  <% if prediction.test_data.match(URI.regexp(%w[http https])) %>
    <% text = prediction.test_data.match(%r{db.netkeiba.com/race/(\d+)/?})[1] %>
    <td class='td-test-data'>
      <%= link_to prediction.test_data, {:target => :_blank} do %>
        <%= text %><span class='glyphicon glyphicon-new-window'></span>
      <% end %>
    </td>
  <% else %>
    <td class='td-test-data'><%= prediction.test_data %></td>
  <% end %>
  <% if prediction.state == 'processing' %>
    <td class='td-result'>
      <span class='processing'>実行中</span><i class='fa fa-refresh fa-spin'></i>
    </td>
  <% else %>
    <td class='td-result' style='padding:4px'>
      <span title='<%= prediction.results.map(&:number).sort.join(',') %>'>
    <% prediction.results.sort_by(&:number).first(6).each_with_index do |result, i| %>
      <% color = %w[orange skyblue magenta] %>
      <span class='fa-stack' style='font-size: 1em;color:<%= color[i] || 'black' %>'>
        <i class='fa fa-circle fa-stack-2x'></i>
        <i class='fa fa-stack-1x fa-inverse'><%= result.number %></i>
      </span>
    <% end %>
    <% if prediction.results.size > 6 %>
      <span>...</span>
    <% end %>
      </span>
    </td>
  <% end %>
</tr>
