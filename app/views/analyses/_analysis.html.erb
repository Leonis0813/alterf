<tr id='<%= analysis.analysis_id %>'>
  <td class='<%= state_to_class(analysis.state) %>'>
    <%= time_to_string(analysis.performed_at) %>
  </td>
  <td class='<%= state_to_class(analysis.state) %>'>
    <%= analysis.num_data %>
  </td>
  <td class='<%= state_to_class(analysis.state) %>'>
    <%= analysis.num_feature %>
  </td>
  <td class='<%= state_to_class(analysis.state) %>'>
    <%= analysis.num_entry %>
  </td>
  <td class='<%= state_to_class(analysis.state) %>'>
    <button class='btn btn-xs btn-<%= state_to_class(analysis.state) %> btn-param'>
      確認
    </button>
  </td>
  <td class='<%= state_to_class(analysis.state) %>'>
  <% case analysis.state %>
  <% when 'processing' %>
    <span class='processing'><%= state_to_title(analysis.state) %></span>
    <i class='fa fa-refresh fa-spin'></i>
  <% when 'completed' %>
    <%= link_to analysis_path(analysis.analysis_id), target: :_blank, rel: 'noopener noreferrer' do %>
      <button class='btn btn-xs btn-success' title='結果を確認'>
        <%= state_to_title(analysis.state) %>
        <span class='glyphicon glyphicon-new-window'></span>
      </button>
    <% end %>
  <% else %>
    <%= state_to_title(analysis.state) %>
  <% end %>
  </td>
  <td class='rebuild'>
    <%= form_tag analyses_path, remote: true, style: 'padding: 0px' do %>
      <%= hidden_field_tag :num_data, analysis.num_data, id: "num_data-#{analysis.analysis_id}" %>
      <%= hidden_field_tag :num_entry, analysis.num_entry, id: "num_entry-#{analysis.analysis_id}" %>

      <% parameter = analysis.parameter %>
      <%= hidden_field_tag :max_depth, parameter.max_depth, name: 'parameter[max_depth]' %>
      <%= hidden_field_tag :max_features, parameter.max_features, name: 'parameter[max_features]' %>
      <%= hidden_field_tag :max_leaf_nodes, parameter.max_leaf_nodes, name: 'parameter[max_leaf_nodes]' %>
      <%= hidden_field_tag :min_samples_leaf, parameter.min_samples_leaf, name: 'parameter[min_samples_leaf]' %>
      <%= hidden_field_tag :min_samples_split, parameter.min_samples_split, name: 'parameter[min_samples_split]' %>
      <%= hidden_field_tag :num_tree, parameter.num_tree, name: 'parameter[num_tree]' %>
      <%= button_tag type: :submit, class: 'btn btn-default' do %>
        <span class='glyphicon glyphicon-repeat' />
      <% end %>
    <% end %>
  </td>
</tr>
